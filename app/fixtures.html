<div ng-controller="FixtureController as fixtureCtrl">
    <p>
    <div class="col-sm-2"/>
        <button class="btn btn-sm btn-primary btn-block" ng-click="fixtureCtrl.toggleFilters()">{{fixtureCtrl.showFilters ? 'Hide Filters' : 'Show Filters'}}</button>
    </div>
    <div class="col-sm-2"/>
        <button class="btn btn-sm btn-primary btn-block" ng-show="fixtureCtrl.showPrivilegedData()" ng-click="fixtureCtrl.showAddForm()">Add Fixture</button>
    </div>
    <form id="addForm" class="form-horizontal">
        <div class="form-group">
        </div>
    </form>
    <form ng-if="fixtureCtrl.showFilters" id="filterForm" class="form-horizontal fade">
        <div class="form-group">
        <label for="weekFilter" class="col-sm-3 control-label">Filter fixtures by week</label>
            <div class="col-sm-6">
            <select id="weekFilter" ng-model="obj.weekfilter" ng-change="fixtureCtrl.filter()" class="form-control" >
                <option value="all">All</option>
                <option value="{{week.id}}" ng-repeat="week in fixtureCtrl.getWeeks()">
                   {{week.name}} ( {{week.date}} )
                </option>
            </select>
        </div>
        </div>

        <div class="form-group">
        <label for="groupFilter" class="col-sm-3 control-label">Filter fixtures by group</label>
            <div class="col-sm-6">
            <select id="groupFilter" ng-model="obj.groupfilter" ng-change="fixtureCtrl.filter()" class="form-control">
                <option value="all">All</option>
                <option value="{{group.id}}" ng-repeat="group in fixtureCtrl.getGroups()">
                   {{group.name}}
                </option>
            </select>
        </div>
        </div>

        <div class="form-group">
        <label for="playerFilter" class="col-sm-3 control-label">Filter fixtures by player</label>
            <div class="col-sm-6">
            <select id="playerFilter" ng-model="obj.playerfilter" ng-change="fixtureCtrl.filter()" class="form-control">
                <option value="all">All</option>
                <option value="{{player.id}}" ng-repeat="player in fixtureCtrl.getPlayers()">
                   {{player.forename + ' ' + player.surname}}
                </option>
            </select>
        </div>
        </div>
    </form>

    <table class="table">
        <thead>
            <tr>
                <th>Date</th>
                <th>Group</th>
                <th>Board</th>
                <th>Order of Play</th>
                <th>Player 1</th>
                <th>Player 2</th>
                <th>Marker 1</th>
                <th>Marker 2</th>
                <th></th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="fixture in fixtureCtrl.getFixtures() | orderBy:['-weekDateFormatted', 'group', 'orderOfPlay']">
                <td>{{fixture.weekNumber}} ( {{fixture.weekDate}} )</td>
                <td>{{fixture.group}}</td>
                <td>{{fixture.venue}}</td>
                <td>{{fixture.orderOfPlay}}</td>
                <td>{{fixture.playerOne}}</td>
                <td>{{fixture.playerTwo}}</td>
                <td>{{fixture.markerOne}}</td>
                <td>{{fixture.markerTwo}}</td>
                <td>
                    <span ng-show="fixtureCtrl.showPrivilegedData()" ng-click="fixtureCtrl.completeFixture(fixture)" data-toggle="tooltip" data-placement="bottom" title="Record Result" ng-class="fixture.complete ? '' : 'glyphicon glyphicon-play-circle'" style="color:green">
                </td>
                <td>
                    <span ng-class="fixture.complete ? 'glyphicon glyphicon-ok' : ''" data-toggle="tooltip" data-placement="bottom" title="Result Recorded" style="color:green">
                </td>
            </tr>
        </tbody>
    </table>
</div>